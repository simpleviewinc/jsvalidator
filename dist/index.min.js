!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r){var t,n,o,a,i=[],s=function(e){var r={type:e.type,name:e.name,enum:e.enum,default:e.default,max:e.max,min:e.min,regex:e.regex,class:e.class,custom:e.custom,required:void 0!==e.required&&!0===e.required,schema:"indexObject"===e.type&&e.schema instanceof Array?[{type:"object",schema:e.schema,deleteExtraKeys:e.deleteExtraKeys,allowExtraKeys:e.allowExtraKeys}]:e.schema instanceof Array?e.schema:void 0!==e.schema?[e.schema]:void 0,allowExtraKeys:void 0===e.allowExtraKeys||!0===e.allowExtraKeys,deleteExtraKeys:void 0!==e.deleteExtraKeys&&!0===e.deleteExtraKeys,throwOnInvalid:void 0!==e.throwOnInvalid&&!0===e.throwOnInvalid};if(void 0!==r.schema)for(var t=0;t<r.schema.length;t++)r.schema[t]=s(r.schema[t]);return r},u=function(e,r){var n=void 0!==e,s=r.schema,u=r.type,v=r.throwOnInvalid,x=r.required,b=r.custom;if(!n&&x){var g=new Error("Required field"+h(t)+"does not exist.");if(v)throw g;return i.push({err:g,contextArray:t}),e}if(!n&&!x&&void 0===r.default)return e;if(!n&&!x&&void 0!==r.default){if(e=y(e,r),"object"!==r.type&&"array"!==r.type)return e;n=!0}if(!n)throw new Error("Wtf, this case should never happen.");var w=!1;if("any"===u);else if("string"===u)"string"!=typeof e?w=!0:p(e,r);else if("boolean"===u)"boolean"!=typeof e&&(w=!0);else if("number"===u)"number"!=typeof e&&(w=!0);else if("function"===u)"function"!=typeof e&&(w=!0);else if("class"===u)e instanceof r.class||(w=!0);else if("date"===u)e instanceof Date||(w=!0);else if("indexObject"===u)"object"!=typeof e?w=!0:void 0!==s&&c(e,r);else if("object"===u)"object"!=typeof e?w=!0:void 0!==s&&l(e,r);else if("array"===u)e instanceof Array?void 0!==s&&f(e,r):w=!0;else if("simpleObject"===u)"object"!=typeof e?w=!0:d(e,r);else{if("regex"!==u)throw new Error("Field"+h(t)+"should be type '"+r.type+"' but that type isn't supported by jsvalidator.");e instanceof RegExp==!1&&(w=!0)}if(w){var E="Field"+h(t)+"should be type '"+r.type+"' but is type '"+typeof e+"'.";["boolean","number","string"].indexOf(typeof e)>-1&&(E+=" Value is "+JSON.stringify(e)+".");g=new Error(E);i.push({err:g,contextArray:t})}else void 0!==b&&b.forEach(function(r,n){if(!r.fn({value:e,current:a})){var o=new Error("Field"+h(t)+"failed custom validation '"+r.label+"'.");i.push({err:o,contextArray:t})}});if(i.length>0&&!0===v)throw m(o,i);return e},f=function(e,r){for(var o,i=0;i<e.length;i++){o=e[i],t.push(i),n.push(e);var s=a;a=e;var f=u(o,r.schema[0]);a=s,t.pop(),n.pop(),e[i]=f}},l=function(e,r){for(var o,s=[],f=0;f<r.schema.length;f++){o=r.schema[f],s.push(o.name),t.push(o.name),n.push(e);var l=a;a=e;var c=u(e[o.name],o);a=l,t.pop(),n.pop(),void 0!==c&&(e[o.name]=c)}if(!1===r.allowExtraKeys||!0===r.deleteExtraKeys)for(var f in e)-1===s.indexOf(f)&&(!0===r.deleteExtraKeys?delete e[f]:i.push({err:new Error("Object"+h(t)+"contains extra key '"+f+"' not declared in schema."),contextArray:t}))},c=function(e,r){var o;for(var i in e){o=e[i],t.push(i),n.push(e);var s=a;a=e;u(o,r.schema[0]);a=s,t.pop(),n.pop()}},d=function(e,r){var o;for(var i in e){o=e[i],t.push(i),n.push(e);var s=a;a=e;u(o,r.schema[0]);a=s,t.pop(),n.pop()}},p=function(e,r){if(void 0!==r.enum&&-1===r.enum.indexOf(e)){var n=new Error("Field"+h(t)+"must be a value in '"+r.enum+"'.");i.push({err:n,contextArray:t})}if(void 0!==r.min&&e.length<r.min){n=new Error("Field"+h(t)+"has a minimum length of '"+r.min+"'.");i.push({err:n,contextArray:t})}if(void 0!==r.max&&e.length>r.max){n=new Error("Field"+h(t)+"has a maximum length of '"+r.max+"'.");i.push({err:n,contextArray:t})}if(void 0!==r.regex&&!e.match(r.regex)){n=new Error("Field"+h(t)+"does not match a regex of '"+r.regex+"'.");i.push({err:n,contextArray:t})}},y=function(e,r){if("function"==typeof r.default){var i={rootObj:o,value:e,def:r,contextArray:t,contextArrayObj:n,current:a};return n[n.length-2]instanceof Array&&(i.i=t[t.length-2]),r.default(i)}return r.default},h=function(e){return 0===e.length?" ":" '"+e.join(".")+"' "},m=function(e,r){var t=r.map(function(e){return e.err.message}).join("\r\n\t");return new Error("Validation Error\r\n\t"+t)};e.exports={validate:function(e,r){t=[],n=[],i=[],o=e,a=e;var f=s(r),l={data:u(e,f),errors:i,err:null,success:!1};return l.success=0===l.errors.length,l.errors.length>0&&(l.err=m(e,l.errors)),l}}}])});