!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";var n,o,a,i,s=[],u=function(e){var r={type:e.type,name:e.name,enum:e.enum,default:e.default,max:e.max,min:e.min,regex:e.regex,class:e.class,custom:e.custom,required:void 0!==e.required&&!0===e.required,schema:"indexObject"===e.type&&e.schema instanceof Array?[{type:"object",schema:e.schema,deleteExtraKeys:e.deleteExtraKeys,allowExtraKeys:e.allowExtraKeys}]:e.schema instanceof Array?e.schema.slice():void 0!==e.schema?[e.schema]:void 0,allowExtraKeys:void 0===e.allowExtraKeys||!0===e.allowExtraKeys,deleteExtraKeys:void 0!==e.deleteExtraKeys&&!0===e.deleteExtraKeys,throwOnInvalid:void 0!==e.throwOnInvalid&&!0===e.throwOnInvalid};if(void 0!==r.schema)for(var t=0;t<r.schema.length;t++)r.schema[t]=u(r.schema[t]);return r},f=function(e,r){var t=void 0!==e,o=r.schema,u=r.type,f=r.throwOnInvalid,x=r.required,b=r.custom;if(!t&&x){var g=new Error("Required field"+m(n)+"does not exist.");if(f)throw g;return s.push({err:g,contextArray:n}),e}if(!t&&!x&&void 0===r.default)return e;if(!t&&!x&&void 0!==r.default){if(e=h(e,r),"object"!==r.type&&"array"!==r.type)return e;t=!0}if(!t)throw new Error("Wtf, this case should never happen.");var w=!1;if("any"===u);else if("string"===u)"string"!=typeof e?w=!0:y(e,r);else if("boolean"===u)"boolean"!=typeof e&&(w=!0);else if("number"===u)"number"!=typeof e&&(w=!0);else if("function"===u)"function"!=typeof e&&(w=!0);else if("class"===u)e instanceof r.class||(w=!0);else if("date"===u)e instanceof Date||(w=!0);else if("indexObject"===u)"object"!=typeof e?w=!0:void 0!==o&&d(e,r);else if("object"===u)"object"!=typeof e?w=!0:void 0!==o&&c(e,r);else if("array"===u)e instanceof Array?void 0!==o&&l(e,r):w=!0;else if("simpleObject"===u)"object"!=typeof e?w=!0:p(e,r);else{if("regex"!==u)throw new Error("Field"+m(n)+"should be type '"+r.type+"' but that type isn't supported by jsvalidator.");e instanceof RegExp==!1&&(w=!0)}if(w){var E="Field"+m(n)+"should be type '"+r.type+"' but is type '"+typeof e+"'.";["boolean","number","string"].indexOf(typeof e)>-1&&(E+=" Value is "+JSON.stringify(e)+".");g=new Error(E);s.push({err:g,contextArray:n})}else void 0!==b&&b.forEach((function(r,t){if(!r.fn({value:e,current:i})){var o=new Error("Field"+m(n)+"failed custom validation '"+r.label+"'.");s.push({err:o,contextArray:n})}}));if(s.length>0&&!0===f)throw v(a,s);return e},l=function(e,r){for(var t,a=0;a<e.length;a++){t=e[a],n.push(a),o.push(e);var s=i;i=e;var u=f(t,r.schema[0]);i=s,n.pop(),o.pop(),e[a]=u}},c=function(e,r){for(var t,a=[],u=0;u<r.schema.length;u++){t=r.schema[u],a.push(t.name),n.push(t.name),o.push(e);var l=i;i=e;var c=f(e[t.name],t);i=l,n.pop(),o.pop(),void 0!==c&&(e[t.name]=c)}if(!1===r.allowExtraKeys||!0===r.deleteExtraKeys)for(var u in e)-1===a.indexOf(u)&&(!0===r.deleteExtraKeys?delete e[u]:s.push({err:new Error("Object"+m(n)+"contains extra key '"+u+"' not declared in schema."),contextArray:n}))},d=function(e,r){var t;for(var a in e){t=e[a],n.push(a),o.push(e);var s=i;i=e;f(t,r.schema[0]);i=s,n.pop(),o.pop()}},p=function(e,r){var t;for(var a in e){t=e[a],n.push(a),o.push(e);var s=i;i=e;f(t,r.schema[0]);i=s,n.pop(),o.pop()}},y=function(e,r){if(void 0!==r.enum&&-1===r.enum.indexOf(e)){var t=new Error("Field"+m(n)+"must be a value in '"+r.enum+"'.");s.push({err:t,contextArray:n})}if(void 0!==r.min&&e.length<r.min){t=new Error("Field"+m(n)+"has a minimum length of '"+r.min+"'.");s.push({err:t,contextArray:n})}if(void 0!==r.max&&e.length>r.max){t=new Error("Field"+m(n)+"has a maximum length of '"+r.max+"'.");s.push({err:t,contextArray:n})}if(void 0!==r.regex&&!e.match(r.regex)){t=new Error("Field"+m(n)+"does not match a regex of '"+r.regex+"'.");s.push({err:t,contextArray:n})}},h=function(e,r){if("function"==typeof r.default){var t={rootObj:a,value:e,def:r,contextArray:n,contextArrayObj:o,current:i};return o[o.length-2]instanceof Array&&(t.i=n[n.length-2]),r.default(t)}return r.default},m=function(e){return 0===e.length?" ":" '"+e.join(".")+"' "},v=function(e,r){var t=r.map((function(e){return e.err.message})).join("\r\n\t");return new Error("Validation Error\r\n\t"+t)};e.exports={validate:function(e,r){n=[],o=[],s=[],a=e,i=e;var t=u(r),l={data:f(e,t),errors:s,err:null,success:!1};return l.success=0===l.errors.length,l.errors.length>0&&(l.err=v(e,l.errors)),l}}}])}));